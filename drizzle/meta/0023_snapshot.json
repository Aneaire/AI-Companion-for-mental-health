{
  "id": "91aa0cff-1796-4dfd-930f-cfbfbf64ea0c",
  "prevId": "03fd1477-5572-49e3-81bb-c84abd82e02f",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.impersonate_thread": {
      "name": "impersonate_thread",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "persona_id": {
          "name": "persona_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "session_name": {
          "name": "session_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_name": {
          "name": "preferred_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "reason_for_visit": {
          "name": "reason_for_visit",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "impersonate_thread_user_id_users_id_fk": {
          "name": "impersonate_thread_user_id_users_id_fk",
          "tableFrom": "impersonate_thread",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "impersonate_thread_persona_id_persona_id_fk": {
          "name": "impersonate_thread_persona_id_persona_id_fk",
          "tableFrom": "impersonate_thread",
          "tableTo": "persona",
          "columnsFrom": [
            "persona_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.messages": {
      "name": "messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "thread_id": {
          "name": "thread_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "thread_type": {
          "name": "thread_type",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "sender": {
          "name": "sender",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "messages_session_id_sessions_id_fk": {
          "name": "messages_session_id_sessions_id_fk",
          "tableFrom": "messages",
          "tableTo": "sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "messages_thread_id_impersonate_thread_id_fk": {
          "name": "messages_thread_id_impersonate_thread_id_fk",
          "tableFrom": "messages",
          "tableTo": "impersonate_thread",
          "columnsFrom": [
            "thread_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona": {
      "name": "persona",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "age": {
          "name": "age",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "problem_description": {
          "name": "problem_description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "background": {
          "name": "background",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "personality": {
          "name": "personality",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "complexity_level": {
          "name": "complexity_level",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'basic'"
        },
        "emotional_profile": {
          "name": "emotional_profile",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "behavioral_patterns": {
          "name": "behavioral_patterns",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "cultural_background": {
          "name": "cultural_background",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "socioeconomic_status": {
          "name": "socioeconomic_status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "education_level": {
          "name": "education_level",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "relationship_status": {
          "name": "relationship_status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "coping_mechanisms": {
          "name": "coping_mechanisms",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "triggers": {
          "name": "triggers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "goals": {
          "name": "goals",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "fears": {
          "name": "fears",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "strengths": {
          "name": "strengths",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "weaknesses": {
          "name": "weaknesses",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "communication_style": {
          "name": "communication_style",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "attachment_style": {
          "name": "attachment_style",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "is_template": {
          "name": "is_template",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "usage_count": {
          "name": "usage_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_used_at": {
          "name": "last_used_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "evolution_stage": {
          "name": "evolution_stage",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'initial'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "persona_user_id_users_id_fk": {
          "name": "persona_user_id_users_id_fk",
          "tableFrom": "persona",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "persona_template_id_persona_templates_id_fk": {
          "name": "persona_template_id_persona_templates_id_fk",
          "tableFrom": "persona",
          "tableTo": "persona_templates",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona_customizations": {
      "name": "persona_customizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "persona_id": {
          "name": "persona_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "customization_type": {
          "name": "customization_type",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "customization_data": {
          "name": "customization_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "persona_customizations_persona_id_persona_id_fk": {
          "name": "persona_customizations_persona_id_persona_id_fk",
          "tableFrom": "persona_customizations",
          "tableTo": "persona",
          "columnsFrom": [
            "persona_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona_sessions": {
      "name": "persona_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "persona_id": {
          "name": "persona_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "session_duration": {
          "name": "session_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "conversation_quality_score": {
          "name": "conversation_quality_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "therapeutic_techniques_used": {
          "name": "therapeutic_techniques_used",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "persona_adaptations": {
          "name": "persona_adaptations",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "persona_sessions_persona_id_persona_id_fk": {
          "name": "persona_sessions_persona_id_persona_id_fk",
          "tableFrom": "persona_sessions",
          "tableTo": "persona",
          "columnsFrom": [
            "persona_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "persona_sessions_thread_id_impersonate_thread_id_fk": {
          "name": "persona_sessions_thread_id_impersonate_thread_id_fk",
          "tableFrom": "persona_sessions",
          "tableTo": "impersonate_thread",
          "columnsFrom": [
            "thread_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona_templates": {
      "name": "persona_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "category": {
          "name": "category",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "base_personality": {
          "name": "base_personality",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "base_background": {
          "name": "base_background",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "base_age_range": {
          "name": "base_age_range",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "base_problem_types": {
          "name": "base_problem_types",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_by": {
          "name": "created_by",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "usage_count": {
          "name": "usage_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "persona_templates_created_by_users_id_fk": {
          "name": "persona_templates_created_by_users_id_fk",
          "tableFrom": "persona_templates",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.persona_versions": {
      "name": "persona_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "persona_id": {
          "name": "persona_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "version_number": {
          "name": "version_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "changes": {
          "name": "changes",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "persona_versions_persona_id_persona_id_fk": {
          "name": "persona_versions_persona_id_persona_id_fk",
          "tableFrom": "persona_versions",
          "tableTo": "persona",
          "columnsFrom": [
            "persona_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.session_forms": {
      "name": "session_forms",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "answers": {
          "name": "answers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "session_forms_session_id_sessions_id_fk": {
          "name": "session_forms_session_id_sessions_id_fk",
          "tableFrom": "session_forms",
          "tableTo": "sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sessions": {
      "name": "sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "thread_id": {
          "name": "thread_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "session_number": {
          "name": "session_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "session_name": {
          "name": "session_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "crisis_detected": {
          "name": "crisis_detected",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "sessions_thread_id_threads_id_fk": {
          "name": "sessions_thread_id_threads_id_fk",
          "tableFrom": "sessions",
          "tableTo": "threads",
          "columnsFrom": [
            "thread_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.threads": {
      "name": "threads",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "session_name": {
          "name": "session_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_name": {
          "name": "preferred_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "current_emotions": {
          "name": "current_emotions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "reason_for_visit": {
          "name": "reason_for_visit",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "support_type": {
          "name": "support_type",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "support_type_other": {
          "name": "support_type_other",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "additional_context": {
          "name": "additional_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response_tone": {
          "name": "response_tone",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "image_response": {
          "name": "image_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response_character": {
          "name": "response_character",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "response_description": {
          "name": "response_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "summary_context": {
          "name": "summary_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "archived": {
          "name": "archived",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "threads_user_id_users_id_fk": {
          "name": "threads_user_id_users_id_fk",
          "tableFrom": "threads",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "clerk_id": {
          "name": "clerk_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "nickname": {
          "name": "nickname",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "last_name": {
          "name": "last_name",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "age": {
          "name": "age",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'active'"
        },
        "hobby": {
          "name": "hobby",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "''"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_clerk_id_unique": {
          "name": "users_clerk_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "clerk_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}