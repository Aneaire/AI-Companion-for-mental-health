# Project Rules and Architecture

## Package Manager

- Use Bun for package management.
- Install: `bun install`
- Run scripts: `bun run <script>`

## Project Architecture

### Backend

- Framework: Hono for fast API endpoints.
- Validation: Zod for request/response validation.
- Streaming: Real-time chat responses.
- Structure:
  - `routes/`: API endpoints.
  - `db/`: Drizzle ORM schema and queries.
  - `services/`: Business logic and integrations.
  - `types/`: TypeScript types.

### Frontend

- Framework: React with TypeScript.
- Data: TanStack Query for fetching/caching.
- State: Zustand for global state.
- Cache: LocalStorage for persistence.
- Structure:
  - `components/`: Reusable UI components (`chat/`, `ui/`).
  - `hooks/`: Custom React hooks.
  - `stores/`: Zustand stores.
  - `types/`: TypeScript types.

## Application Overview

Real-time chat app with Google's Gemini model:

- Streams messages for instant updates.
- Persists chat history.
- Responsive, modern UI.
- Optimized with caching and type safety.

## Key Features

- Real-time message streaming.
- Persistent chat history.
- Error handling and recovery.
- Responsive design.
- Type-safe code.
- Efficient state and data management.

## Development Workflow

- Run: `bun run dev:all` for frontend + backend.
- Use TypeScript best practices.
- Write modular, clean code.
- Test with Vitest and React Testing Library.
- Use Conventional Commits for git.

## Performance

- Cache with TanStack Query and LocalStorage.
- Optimize streaming and bundle size.
- Use error boundaries and loading states.
- Apply debouncing/throttling as needed.

## Security

- Validate inputs with Zod.
- Use `.env` for sensitive data.
- Implement rate limiting and CORS.
- Sanitize inputs to prevent attacks.

## Existing Setup

- Backend: Hono, streaming, Drizzle ORM, PostgreSQL, basic schema.
- Frontend: TanStack Router, message streaming, API client, basic components.

## Note

- You can always implement the code directly you don't have to ask everytime
- Make use of full capability of hono when touching API's
